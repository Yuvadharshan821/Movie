<!DOCTYPE html>
<html>
<head>
    <title>Add Item</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1 class="header">Add Item</h1>

<div class="add-form">
    <input id="title" placeholder="Title" />

    <input id="poster" placeholder="Poster URL (optional)" />

    <select id="category">
        <option value="movie">Movie</option>
        <option value="anime">Anime</option>
        <option value="webseries">Web Series</option>
        <option value="game">Game</option>
    </select>

    <button onclick="addItem()">Add</button>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbzmunyyjve54SpI3ILzEF9tctld7wRXEGN6NyUrTq6VX_IERfLZa_Z-ed2dAh30lID84A/exec";

async function addItem() {
    const title = document.getElementById("title").value.trim();
    const category = document.getElementById("category").value;
    const poster = document.getElementById("poster").value.trim(); // NEW

    if (!title) {
        alert("Enter a title!");
        return;
    }

    // Send poster along with title and category
    const res = await fetch(`${API}?action=add&title=${encodeURIComponent(title)}&category=${encodeURIComponent(category)}&poster=${encodeURIComponent(poster)}`);
    const data = await res.json();

    if (data.status === "added") {
        alert("Added Successfully!");
        document.getElementById("title").value = "";
        document.getElementById("poster").value = ""; // clear poster input
    } else {
        alert("Error: " + (data.message || "Try again"));
    }
}
</script>

</body>
</html>
